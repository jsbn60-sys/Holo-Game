using System.Collections;
using System.Collections.Generic;
using UnityEngine;
/* author: SWT-P_WS_2018_Holo */
using Multiplayer;
using UnityEngine.UI;

///<summary>
/// This class implements the Invisibility item which the player can use to be fully invisible to all enemies
/// An icon will be displayed at the left side of the screen while the item is active 
/// This class only calls a function in the PlayerController script which executes the effects of the item
///</summary>
public class Invulnerability : Item
{
    public int duration; //Amount of time this item will last
	public GameObject icon;
	
    public override void Ability(PlayerController player)
    {
		player.CmdInvulnerability(true);
		player.StartCoroutine(ResetVulnerability(player));
		player.GetComponent<AudioManager>().PlaySound(player.transform.position,6);
		icon = new GameObject();
		DisplayIcon(icon, new Vector3(30.5f, 231.5f, 0f));
    }

	//wait for duration seconds and reset Vulnerability
    private IEnumerator ResetVulnerability(PlayerController player)
    {
        yield return new WaitForSecondsRealtime(duration);
		player.CmdInvulnerability(false);
		Destroy(icon);
	}
}
